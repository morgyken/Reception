$(function(){var b=0;var a=0;var c=null;$("#new").click(function(f){f.preventDefault();$("#newSchedule").modal("show")});$("#adds").click(function(){$("#newSchedule").modal("hide")});$(".prefetch").click(function(){b=$(this).attr("sam-ajax");$("#all_cat").click()});function d(){$.ajax({url:GET_SCHEDULE,type:"GET",data:{clinic:b,category:a,start:$("#date1").val(),end:$("#date2").val()},success:function(f){$("#appointments").html(f).fadeIn();if(c){c.destroy()}try{c=$("table").DataTable()}catch(g){}alertify.success('<i class="fa fa-info"></i> Updated appointments')},error:function(){alertify.error('<i class="fa fa-warning"></i> Could not retrieve appointments')}})}$(".categories").click(function(){a=$(this).attr("sam-ajax2");d()});$("#patient_select").select2({tags:true,theme:"classic",ajax:{url:PATIENTS_URL,dataType:"json",cache:true,data:function(e,f){return{term:e}},results:function(f,e){return{results:f}},cache:true},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,f){return"Please enter "+(f-e.length)+" more characters"},formatInputTooLong:function(f,e){return"Please enter "+(f.length-e)+" less characters"},formatSelectionTooBig:function(e){return"You can only select "+e+" items"},formatLoadMore:function(e){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumInputLength:2});$(".date").datepicker({minDate:0,dateFormat:"yy-mm-dd",yearRange:"1900:+0"});$(".time").timeAutocomplete({increment:10,auto_value:false});$("#all").click();$("#date1").datepicker({dateFormat:"yy-mm-dd",onSelect:function(e){$("#date2").datepicker("option","minDate",e);d()}});$("#date2").datepicker({dateFormat:"yy-mm-dd",onSelect:function(e){d()}});$("#clearBtn").click(function(){$("#date1").val("");$("#date2").val("");d()})});